# In this guide
- [AzOps Settings](#azops-settings)
- [Workflow / Pipeline Settings](#workflow--pipeline-settings)
  - [Workflow Settings in GitHub](#workflow-settings-in-github)
  - [Pipeline Settings in Azure DevOps](#pipeline-settings-in-azure-devops)

## AzOps Settings

The following configuration values can be modified within the `settings.json` file to change the default behavior of AzOps.

| ID  | Name                                 | Description                                                                                                                                                                           | Example                                                                                         |
| --- | ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| 01  | ApplicationInsights                  | Turn on or off logging to Application Insight                                                                                                                                         | `"Core.ApplicationInsights": true`                                                              |
| 02  | AutoGeneratedTemplateFolderPath      | Generate sub folder for composite resources (/.az)                                                                                                                                    | `"Core.AutoGeneratedTemplateFolderPath": ".az"`<br>root<br>└── tenant root group (e42bc18f)<br>        ├── .az<br>        │      └── microsoft.management_managementgroups.json<br>        └── mymanagementgroup (mymanagementgroup)<br>                └── .az<br>                        ├── microsoft.authorization_policyassignments.json<br>                        ├── microsoft.authorization_policydefinitions.json<br>                        ├── microsoft.authorization_roleassignments.json<br>                        └── microsoft.management_managementgroups.json |
| 03  | AutoInitialize                       | Run Initialize-AzOpsEnvironment when module is loaded. *Not recommended to change*                                                                                                    | `"Core.AutoInitialize": true`                                                                   |
| 04  | CustomJqTemplatePath                 | Folder where custom Jq templates are located.                                                                                                                                         | `"Core.CustomJqTemplatePath": ".customtemplates"`                                               |
| 05  | SkipCustomJqTemplate                 | Do not use custom Jq templates, controls if AzOps looks for custom templates at `CustomJqTemplatePath`. [Read more](https://github.com/azure/azops/wiki/custom-jq-templates)          | `"Core.SkipCustomJqTemplate": true`                                                             |
| 06  | DefaultDeploymentRegion              | Default region for deployments                                                                                                                                                        | `"Core.DefaultDeploymentRegion": "northeurope"`                                                 |
| 07  | EnrollmentAccountPrincipalName       | Default enrollment account for Subscription creation                                                                                                                                  | `"Core.EnrollmentAccountPrincipalName": ""`                                                     |
| 08  | ExcludedSubOffer                     | Exclude specific Subscription offer types from pull                                                                                                                                   | `"Core.ExcludedSubOffer": ["AzurePass_2014-09-01","FreeTrial_2014-09-01","AAD_2015-09-01"]`     |
| 09  | ExcludedSubState                     | Exclude specific states of Subscription from pull                                                                                                                                     | `"Core.ExcludedSubState": ["Disabled","Deleted","Warned","Expired"]`                            |
| 10  | IgnoreContextCheck                   | Skip Azure PowerShell context validation. *Not recommended to change*                                                                                                                 | `"Core.IgnoreContextCheck": false`                                                              |
| 11  | IncludeResourcesInResourceGroup      | Discover only resources in these resource groups                                                                                                                                      | `"Core.IncludeResourcesInResourceGroup": ["rg1","rg2"]`                                         |
| 12  | IncludeResourceType                  | Discover only specific resource types [Resource Types](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types)  (only targets Resource Group scoped resources) | `"Core.IncludeResourceType": ["Microsoft.Network/privateDnsZones","Microsoft.Network/firewallPolicies"]` |
| 13  | InvalidateCache                      | Invalidate cached Subscriptions and Management Groups and do a full discovery. *Not recommended to change*                                                                            | `"Core.InvalidateCache": false`                                                                 |
| 14  | OfferType                            | Default offer type for Subscription creation                                                                                                                                          | `"Core.OfferType": "MS-AZR-0017P"`                                                              |
| 15  | PartialMgDiscoveryRoot               | Generate folder hierachy for specific Management Groups IDs                                                                                                                           | `"Core.PartialMgDiscoveryRoot": []`                                                             |
| 16  | SkipPim                              | Do not include Privileged Identity Management resources in pull                                                                                                                       | `"Core.SkipPim": true`                                                                          |
| 17  | SkipLock                             | Do not include ResourceLock resources in pull                                                                                                                                         | `"Core.SkipLock": true`                                                                         |
| 18  | SkipPolicy                           | Do not include Azure Policy state in pull                                                                                                                                             | `"Core.SkipPolicy": false`                                                                      |
| 19  | SkipResource                         | Do not include Resources within Resource Groups                                                                                                                                       | `"Core.SkipResource": false`                                                                    |
| 20  | SkipChildResource                    | Do not include Azure child resources                                                                                                                                                  | `"Core.SkipChildResource": false`                                                               |
| 21  | SkipResourceGroup                    | Do not include Resource Groups in pull                                                                                                                                                | `"Core.SkipResourceGroup": false`                                                               |
| 22  | SkipResourceType                     | Skip specific [Resource Types](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types)  (only targets Resource Group scoped resources) | `"Core.SkipResourceType": ["Microsoft.VSOnline/plans"]`                                        |
| 23  | SkipRole                             | Do not include Role types in pull                                                                                                                                                     | `"Core.SkipRole": false`                                                                        |
| 24  | State                                | Folder to store AzOpsState artefact, defaults to `root`                                                                                                                               | `"Core.State: "/root"`                                                                          |
| 25  | SubscriptionsToIncludeResourceGroups | Filter which Subscription IDs should include Resource Groups in pull [Logic Updated in v2.0.0](https://github.com/Azure/AzOps/releases/tag/2.0.0)                                     | `"Core.SubscriptionsToIncludeResourceGroups": ["*"]`                                            |
| 26  | TemplateParameterFileSuffix          | Default template file suffix. *Not recommended to change*                                                                                                                             | `"Core.TemplateParameterFileSuffix": ".json"`                                                   |
| 27  | AllowMultipleTemplateParameterFiles  | Control multiple parameter file behaviour. *Not recommended to change*                                                                                                                | `"Core.AllowMultipleTemplateParameterFiles": false`                                             |
| 28  | DeployAllMultipleTemplateParameterFiles | Control base template deployment behaviour with changes and un-changed multiple corresponding parameter files.                                                                     | `"Core.DeployAllMultipleTemplateParameterFiles": false`                                         |
| 29  | MultipleTemplateParameterFileSuffix | Multiple parameter file suffix identifier. *Example mytemplate.x1.bicepparam*                                                                                                          | `"Core.MultipleTemplateParameterFileSuffix": ".x"`                                              |
| 30  | ParallelDeployMultipleTemplateParameterFiles | Control parallel deployment of MultipleTemplateParameterFiles behaviour                                                                                                       | `"Core.ParallelDeployMultipleTemplateParameterFiles": false`                                    |
| 31  | ThrottleLimit                        | Value declaring number of parallel threads. [Read more](https://github.com/azure/azops/wiki/performance-considerations)                                                               | `"Core.ThrottleLimit": 5`                                                                       |
| 32  | WhatifExcludedChangeTypes            | Exclude specific change types from WhatIf operations                                                                                                                                  | `"Core.WhatifExcludedChangeTypes": ["NoChange","Ignore"]`                                       |

## Workflow / Pipeline Settings

The following settings can be modified as variables inside GitHub or Azure DevOps and will affect how the workflow or pipeline is run.

* **AZOPS_MODULE_VERSION**
  Set this to the version of the AzOps module you want to use. If the variable is missing, the latest version will be used.
  Typically used to pin the version of the module to a specific version and update to new versions at a controlled manner.
  Make sure to have a process to continously update this variable if it is set.

* **AZOPS_CUSTOM_SORT_ORDER**
  Set this variable to `true` to enable custom sort ordering. When enabled, create a file named `.order` in a folder where you want to control the deployment order of templates.
  Any file that is listed by name in `.order` will will be deployed before other files and in the order that they are listed.

### Workflow Settings in GitHub

Settings in GitHub are configured as Secrets by navigating to Settings -> Secrets -> Actions as described in [GitHub Secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository).

### Pipeline Settings in Azure DevOps

Settings in Azure DevOps are configured as variable groups, as described in [Azure DevOps Variable Groups](https://learn.microsoft.com/azure/devops/pipelines/library/variable-groups).

